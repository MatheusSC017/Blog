{% extends 'base.html' %}
{% load humanize %}

{% block head %}
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block title %} | {{ post.title_post }}{% endblock %}

{% block content %}
<section class="container-fluid landing-item gray-bg-color pt-5 pb-5">

    <!-- Main Content -->
    <div class="row">
        <div class="col-xl"></div>
        <div class="col-xl-8">

            <!-- Details about the post -->
            <h1 class="text-center dark-color">{{ post.title_post }}</h1>
            <div class="text-center">
                <small>
                    {{ post.ratting_post }} <i class="bi bi-star-fill text-warning"></i> |
                    {{ post.views_post }} <i class="bi bi-eye-fill"></i> |
                    {{ post.comments_post }} <i class="bi bi-chat-left-text-fill"></i>
                </small>
            </div>
            {% if post.image_post %}
            <div class="text-center p-3">
                <img src="{{ post.image_post.url }}" alt="{{ post.title_post }}" class="img-fluid w-50">
            </div>
            {% endif %}
            <p>
                {{ post.description_post|safe }}
            </p>

            <!-- Album option -->
            {% if post.album_post %}
            <div class="text-end mt-3">
                <a href="{% url 'post:post' post.pk %}">
                    <button class="button-format"><strong>Album</strong></button>
                </a>
            </div>
            {% endif %}

            <!-- Avaliation form -->
            <form method="POST" action="#btn_send_avaliation" id="avaliation-form" class="mt-5">
                <div class="container d-flex justify-content-center">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="stars">

                                <input class="star star-5" id="star-5" type="radio" name="star"/>
                                <label class="star star-5" for="star-5"></label>

                                <input class="star star-4" id="star-4" type="radio" name="star"/>
                                <label class="star star-4" for="star-4"></label>

                                <input class="star star-3" id="star-3" type="radio" name="star"/>
                                <label class="star star-3" for="star-3"></label>

                                <input class="star star-2" id="star-2" type="radio" name="star"/>
                                <label class="star star-2" for="star-2"></label>

                                <input class="star star-1" id="star-1" type="radio" name="star"/>
                                <label class="star star-1" for="star-1"></label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-end">
                    <input id="btn_send_avaliation" type="submit" class="btn btn-primary button-format" value="Enviar">
                </div>
            </form>

        </div>
        <div class="col-xl"></div>
    </div>

    <!-- Registered comments -->
    <div class="row pt-5">
        <div class="col-xl"></div>
        <div class="col-xl-8">
            <h2 class="my-3">Comentários {{ post.comments_post }}</h2>

            {% for comment in comments %}
            <section class="border-bottom comment">
                <h3 class="h5 mb-2 mt-5 dark-color">
                    {{ comment.user_comment.first_name }} {{ comment.user_comment.last_name}}
                </h3>
                <small class="dark-color">{{ comment.edition_date_comment|naturalday|title }}</small>
                <p class="mb-1">{{ comment.comment }}</p>
            </section>
            {% endfor %}

        </div>
        <div class="col-xl"></div>
    </div>

    <!-- Comment Form -->
    <div class="row pt-5">
        <div class="col-xl"></div>
        <div class="col-xl-8">
            <h2 class="my-3">Deixe um comentário</h2>

            <form method="POST" action="#btn_send_comment" id="form-field">

                <div class="form-floating">
                    {{ comment_form.comment }}
                    {{ comment_form.comment.label_tag }}
                    <div class="primary-color">
                        {{ comment_form.comment.errors }}
                    </div>
                </div>

                {% csrf_token %}
                <div class="text-end mt-3">
                    <button id="btn_send_comment" class="btn button-format">
                        Enviar
                    </button>
                </div>
            </form>
        </div>
        <div class="col-xl"></div>
    </div>
</section>
{% endblock %}
